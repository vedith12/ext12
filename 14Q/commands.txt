// INSERT SAMPLE DOCUMENTS
db.BookInventory.insertMany([
  { title: "DBMS", author: "Navathe", category: "Education", availableCopies: 10, price: 450 },
  { title: "Operating Systems", author: "Silberschatz", category: "Education", availableCopies: 7, price: 550 },
  { title: "Harry Potter", author: "J.K. Rowling", category: "Fiction", availableCopies: 15, price: 350 },
  { title: "The Hobbit", author: "Tolkien", category: "Fiction", availableCopies: 5, price: 400 },
  { title: "Atomic Habits", author: "James Clear", category: "Self-Help", availableCopies: 8, price: 300 }
]);

// 1. TOTAL BOOKS AVAILABLE PER CATEGORY
db.BookInventory.aggregate([
  {
    $group: {
      _id: "$category",
      totalCopies: { $sum: "$availableCopies" }
    }
  }
]);

// 2️. AVERAGE PRICE OF BOOKS PER CATEGORY
db.BookInventory.aggregate([
  {
    $group: {
      _id: "$category",
      avgPrice: { $avg: "$price" }
    }
  }
]);

// 3️. LIST BOOKS IN A SPECIFIC CATEGORY (Fiction) SORTED BY PRICE DESC
db.BookInventory.aggregate([
  { $match: { category: "Fiction" } },
  { $sort: { price: -1 } }
]);
